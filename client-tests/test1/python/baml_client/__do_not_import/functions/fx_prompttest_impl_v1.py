# This file is generated by the BAML compiler.
# Do not edit this file directly.
# Instead, edit the BAML files and recompile.
#
# BAML version: 0.0.1
# Generated Date: __DATE__
# Generated by: vbv

from ..clients.client_myclient import MyClient
from ..types.classes.cls_person import Person
from ..types.enums.enm_persontype import PersonType
from .fx_prompttest import BAMLPromptTest
from baml_core._impl.deserializer import Deserializer
from typing import List


# Impl: V1
# Client: MyClient
# An implementation of .


__prompt_template = """\
HELLO THERE
{arg}

Print in this:
{
  "personType": "PersonType as string",
  "job": string | null
}[]\
"""


# We ignore the type here because baml does some type magic to make this work
# for inline SpecialForms like Optional, Union, List.
__deserializer = Deserializer[List[Person]](List[Person])  # type: ignore


@BAMLPromptTest.register_impl("V1")
async def V1(arg: str, /) -> List[Person]:
    prompt = __prompt_template.format(arg=arg)
    response = await MyClient.run_prompt(prompt)
    return __deserializer.from_string(response.generated)
